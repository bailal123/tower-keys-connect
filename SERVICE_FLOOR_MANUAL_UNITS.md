# ุชุญุฏูุซ ูุธุงู ุชุฑููู ุงููุญุฏุงุช ููุทูุงุจู ุงูุฎุฏููุฉ ูุงููุฎุชูุทุฉ
**ุงูุชุงุฑูุฎ**: 5 ุฃูุชูุจุฑ 2025

## ๐ ุงููุตู
ุชู ุชุญุฏูุซ ูุธุงู ุชุนุฑูู ุงููุญุฏุงุช ูู Step3FloorDefinitions ุจุญูุซ ุชุณุชุฎุฏู ุงูุทูุงุจู **ุงูุฎุฏููุฉ (Service)** ู**ุงููุฎุชูุทุฉ (Mixed)** ููุณ ูุธุงู ุงูุฅุฏุฎุงู ุงููุฏูู ุงููุณุชุฎุฏู ูู ุงูุทูุงุจู **ุงูุฃุฑุถูุฉ (Ground)**.

## ๐ฏ ุงููุดููุฉ ุงูุณุงุจูุฉ
- ุงูุทูุงุจู ุงูุฎุฏููุฉ ูุงูุช ุชุณุชุฎุฏู ูุธุงู ุงูุชุฑููู ุงูุชููุงุฆู ุงููุชุณูุณู
- ูู ููู ููุงู ูุฑููุฉ ูู ุชุญุฏูุฏ ุฃููุงุน ูุฃููุงุฏ ุงููุญุฏุงุช ูู ุงูุทูุงุจู ุงูุฎุฏููุฉ
- ุงูุทูุงุจู ุงูุฎุฏููุฉ ุบุงูุจุงู ุชุญุชูู ุนูู ูุญุฏุงุช ูุชููุนุฉ (ูุฎุงุฒูุ ุนูุงุฏุงุชุ ูุทุงุนูุ ุฅูุฎ) ุชุญุชุงุฌ ุชุฑููู ูุฎุตุต

## โ ุงูุญู ุงููุทุจู

### ุฃููุงุน ุงูุทูุงุจู ูุทุฑู ุชุฑููู ุงููุญุฏุงุช:

| ููุน ุงูุทุงุจู | ูุธุงู ุงูุชุฑููู | ุงููุญุฑุฑ ุงููุณุชุฎุฏู |
|------------|--------------|-----------------|
| **Regular (ุณููู)** | ุชููุงุฆู ูุชุณูุณู | ุญููู ุนุฏุฏ ุงููุญุฏุงุช + ุฑูู ุงูุจุฏุงูุฉ |
| **Parking (ููุงูู)** | ุชููุงุฆู ูุชุณูุณู | ุญููู ุนุฏุฏ ุงููุญุฏุงุช + ุฑูู ุงูุจุฏุงูุฉ |
| **Office (ููุชุจู)** | ุชููุงุฆู ูุชุณูุณู | ุญููู ุนุฏุฏ ุงููุญุฏุงุช + ุฑูู ุงูุจุฏุงูุฉ |
| **Commercial (ุชุฌุงุฑู)** | ุชููุงุฆู ูุชุณูุณู | ุญููู ุนุฏุฏ ุงููุญุฏุงุช + ุฑูู ุงูุจุฏุงูุฉ |
| **Service (ุฎุฏูู)** | โจ **ูุฏูู** | MixedUnitsEditor |
| **Mixed (ูุฎุชูุท)** | ูุฏูู | MixedUnitsEditor |
| **Ground (ุฃุฑุถู)** | ูุฏูู | MixedUnitsEditor |

## ๐ง ุงูุชุนุฏููุงุช ุงูุชูููุฉ

### 1. ุชุญุฏูุซ ุดุฑุท ุงุณุชุฎุฏุงู mixedUnits ูู handleDefineFloors
```typescript
// ูุจู:
if(form.floorType===FloorType.Mixed || form.floorType===FloorType.Ground) {
  base.mixedUnits=form.mixed
}

// ุจุนุฏ:
if(form.floorType===FloorType.Mixed || form.floorType===FloorType.Ground || form.floorType===FloorType.Service) {
  base.mixedUnits=form.mixed
}
```

### 2. ุชุญุฏูุซ ุดุฑุท ูุนุงูุฌุฉ mixedUnits ูู handleSave
```typescript
// ูุจู:
if((d.floorType===FloorType.Mixed || d.floorType===FloorType.Ground) && d.mixedUnits){

// ุจุนุฏ:
if((d.floorType===FloorType.Mixed || d.floorType===FloorType.Ground || d.floorType===FloorType.Service) && d.mixedUnits){
```

### 3. ุชุญุฏูุซ ุงูุชุญูู ูู ุงููุญุฏุงุช ุงููุงุฑุบุฉ
```typescript
// ุงูุชุญูู ูู ุฃู ุงููุญุฏุงุช ูู ุงูุทูุงุจู ุงูุฎุฏููุฉ ูุงููุฎุชูุทุฉ ูุงูุฃุฑุถูุฉ ุชุญุชูู ุนูู ุฃููุงุฏ
for(const d of Object.values(floorDefinitions)){ 
  if((d.floorType===FloorType.Mixed || d.floorType===FloorType.Ground || d.floorType===FloorType.Service) && d.mixedUnits?.some(u=>!u.code.trim())){ 
    showWarning(t('builder_select_units_and_design_warning'), t('warning'))
    return 
  } 
}
```

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุนูุฏ ุงุฎุชูุงุฑ ููุน ุทุงุจู "ุฎุฏูู" (Service):

1. **ุชุธูุฑ ุงูุญููู**:
   - โ ููุน ุงูุทุงุจู (Service)
   - โ ุจุงุฏุฆุฉ ุงูููุฏ
   - โ ุจุฏุงูุฉ ุชุฑููู ุจุงุฏุฆุฉ ุงูููุฏ
   - โ **ูุญุฑุฑ ุงููุญุฏุงุช ุงููุฎุชูุทุฉ** (MixedUnitsEditor)

2. **ูุง ุชุธูุฑ ุงูุญููู**:
   - โ ููุน ุงููุญุฏุฉ
   - โ ุนุฏุฏ ุงููุญุฏุงุช
   - โ ุฑูู ุจุฏุงูุฉ ุงููุญุฏุงุช

### MixedUnitsEditor ููุทูุงุจู ุงูุฎุฏููุฉ
ูุณูุญ ุจุฅุถุงูุฉ ูุญุฏุงุช ูุฏููุงู ูุน:
- **ููุน ุงููุญุฏุฉ**: (ุณูููุ ููุชุจุ ุชุฌุงุฑูุ ููุงููุ ูุญูุ ูุฎุฒูุ ุนูุงุฏุฉุ ูุทุนู)
- **ููุฏ ุงููุญุฏุฉ**: ูุต ุญุฑ ูุฏุฎูู ุงููุณุชุฎุฏู

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุทุงุจู ุฎุฏูู ูุชููุน
```
ููุน ุงูุทุงุจู: Service
ุจุงุฏุฆุฉ ุงูููุฏ: S
ุฑูู ุจุฏุงูุฉ ุงูููุฏ: 5
ุงูุทุงุจู: 1

ุงููุญุฏุงุช ุงููุฏููุฉ:
1. ููุน: ูุฎุฒู (Storage)ุ ููุฏ: STORE-01
2. ููุน: ุนูุงุฏุฉ (Clinic)ุ ููุฏ: CLINIC-A
3. ููุน: ูุทุนู (Restaurant)ุ ููุฏ: REST-001
4. ููุน: ูุญู (Shop)ุ ููุฏ: SHOP-02

ุงููุชูุฌุฉ:
- ููุฏ ุงูุทุงุจู: S5
- ุงููุญุฏุงุช: STORE-01, CLINIC-A, REST-001, SHOP-02
```

### ูุซุงู 2: ุทุงุจู ุฎุฏูู ูููุฎุงุฒู
```
ููุน ุงูุทุงุจู: Service
ุจุงุฏุฆุฉ ุงูููุฏ: S
ุฑูู ุจุฏุงูุฉ ุงูููุฏ: 10
ุงูุทุงุจู: -1

ุงููุญุฏุงุช ุงููุฏููุฉ:
1. ููุน: ูุฎุฒูุ ููุฏ: STR-01
2. ููุน: ูุฎุฒูุ ููุฏ: STR-02
3. ููุน: ูุฎุฒูุ ููุฏ: STR-03
4. ููุน: ูุฎุฒูุ ููุฏ: STR-04

ุงููุชูุฌุฉ:
- ููุฏ ุงูุทุงุจู: S10
- ุงููุญุฏุงุช: STR-01, STR-02, STR-03, STR-04
```

### ูุซุงู 3: ุทุงุจู ุฃุฑุถู (ููุง ูุงู)
```
ููุน ุงูุทุงุจู: Ground
ููุฏ ุงูุทุงุจู: G (ุซุงุจุช)

ุงููุญุฏุงุช ุงููุฏููุฉ:
1. ููุน: ูุญูุ ููุฏ: SHOP-A
2. ููุน: ุนูุงุฏุฉุ ููุฏ: CLINIC-1
3. ููุน: ูุทุนูุ ููุฏ: RESTAURANT-01

ุงููุชูุฌุฉ:
- ููุฏ ุงูุทุงุจู: G
- ุงููุญุฏุงุช: SHOP-A, CLINIC-1, RESTAURANT-01
```

### ูุซุงู 4: ุทุงุจู ูุฎุชูุท (ููุง ูุงู)
```
ููุน ุงูุทุงุจู: Mixed
ุจุงุฏุฆุฉ ุงูููุฏ: M
ุฑูู ุจุฏุงูุฉ ุงูููุฏ: 2
ุงูุทุงุจู: 5

ุงููุญุฏุงุช ุงููุฏููุฉ:
1. ููุน: ุณูููุ ููุฏ: 501
2. ููุน: ุณูููุ ููุฏ: 502
3. ููุน: ููุชุจุ ููุฏ: OFF-503
4. ููุน: ุนูุงุฏุฉุ ููุฏ: CLINIC-504

ุงููุชูุฌุฉ:
- ููุฏ ุงูุทุงุจู: M2
- ุงููุญุฏุงุช: 501, 502, OFF-503, CLINIC-504
```

## ๐ ุณูุฑ ุงูุนูู

### ููุทูุงุจู ุงูุฎุฏููุฉ ูุงููุฎุชูุทุฉ ูุงูุฃุฑุถูุฉ:
1. ุงุฎุชูุงุฑ ููุน ุงูุทุงุจู
2. ุฅุฏุฎุงู ุจุงุฏุฆุฉ ุงูููุฏ (ููุฎุฏูู ูุงููุฎุชูุท)
3. ุฅุฏุฎุงู ุฑูู ุจุฏุงูุฉ ุงูููุฏ (ููุฎุฏูู ูุงููุฎุชูุท)
4. **ุฅุถุงูุฉ ุงููุญุฏุงุช ูุฏููุงู ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู**:
   - ุงุฎุชูุงุฑ ููุน ุงููุญุฏุฉ ูู ุงููุงุฆูุฉ
   - ุฅุฏุฎุงู ููุฏ ุงููุญุฏุฉ ูุฏููุงู
   - ูููู ุฅุถุงูุฉ ุนุฏุฏ ุบูุฑ ูุญุฏูุฏ ูู ุงููุญุฏุงุช
   - ูููู ุญุฐู ุฃู ูุญุฏุฉ
5. ุชุทุจูู ุงูุชุนุฑูู

### ููุทูุงุจู ุงูุฃุฎุฑู (ุณูููุ ููุงููุ ููุชุจูุ ุชุฌุงุฑู):
1. ุงุฎุชูุงุฑ ููุน ุงูุทุงุจู
2. ุฅุฏุฎุงู ุจุงุฏุฆุฉ ุงูููุฏ
3. ุฅุฏุฎุงู ุฑูู ุจุฏุงูุฉ ุงูููุฏ (ููุฃููุงุน ุบูุฑ ุงูุณูููุฉ)
4. **ุงุฎุชูุงุฑ ููุน ุงููุญุฏุงุช ูุนุฏุฏูุง**:
   - ููุน ุงููุญุฏุฉ
   - ุนุฏุฏ ุงููุญุฏุงุช
   - ุฑูู ุจุฏุงูุฉ ุงูุชุฑููู
5. ุชุทุจูู ุงูุชุนุฑูู (ูุชู ุฅูุดุงุก ุงููุญุฏุงุช ุชููุงุฆูุงู)

## ๐ก๏ธ ุงูุชุญูู ูุงูุฃูุงู

### ุงูุชุญูู ูุจู ุงูุญูุธ:
```typescript
// ุงูุชุฃูุฏ ูู ุฃู ุฌููุน ุงููุญุฏุงุช ูู ุงูุทูุงุจู ุงูุฎุฏููุฉ ูุงููุฎุชูุทุฉ ูุงูุฃุฑุถูุฉ ููุง ุฃููุงุฏ
for(const d of Object.values(floorDefinitions)){ 
  if((d.floorType===FloorType.Mixed || d.floorType===FloorType.Ground || d.floorType===FloorType.Service) && d.mixedUnits?.some(u=>!u.code.trim())){ 
    showWarning(t('builder_select_units_and_design_warning'), t('warning'))
    return 
  } 
}
```

### ุฑุณุงุฆู ุงูุฎุทุฃ:
- ุฅุฐุง ูุงูุช ููุงู ูุญุฏุงุช ุจุฏูู ููุฏ โ ุชุญุฐูุฑ: "ูุฑุฌู ุชุญุฏูุฏ ุฌููุน ุงููุญุฏุงุช ูุงูุชุตุงููู"
- ุฅุฐุง ูู ูุชู ุชุนุฑูู ุฃู ุทุงุจู โ ุชุญุฐูุฑ: "ูุง ุชูุฌุฏ ุจูุงูุงุช"

## ๐ ุงูููุงุฆุฏ

### 1. ูุฑููุฉ ุฃูุจุฑ
- ุฅููุงููุฉ ุชุญุฏูุฏ ุฃููุงุน ูุฎุชููุฉ ูู ุงููุญุฏุงุช ูู ููุณ ุงูุทุงุจู ุงูุฎุฏูู
- ุฃููุงุฏ ูุฎุตุตุฉ ููู ูุญุฏุฉ ุญุณุจ ุงูุญุงุฌุฉ

### 2. ูุงูุนูุฉ ุฃูุซุฑ
- ุงูุทูุงุจู ุงูุฎุฏููุฉ ูู ุงููุจุงูู ุงูุญููููุฉ ุบุงูุจุงู ูุง ุชุญุชูู ุนูู ุฎููุท ูู ุงููุญุฏุงุช
- ูุธุงู ุงูุฅุฏุฎุงู ุงููุฏูู ูุนูุณ ูุฐุง ุงููุงูุน ุจุดูู ุฃูุถู

### 3. ุณูููุฉ ุงูุงุณุชุฎุฏุงู
- ููุณ ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุทูุงุจู ุงูุฃุฑุถูุฉ ูุงููุฎุชูุทุฉ
- ุชุฌุฑุจุฉ ูุชุณูุฉ ุนุจุฑ ุฃููุงุน ุงูุทูุงุจู ุงููุดุงุจูุฉ

### 4. ุฏูุฉ ูู ุงูุจูุงูุงุช
- ูู ูุญุฏุฉ ููุง ููุน ูููุฏ ูุญุฏุฏ ุจุฏูุฉ
- ูุง ูุฌูุฏ ูุฃููุงุฏ ุชููุงุฆูุฉ ูุฏ ูุง ุชุชูุงุณุจ ูุน ุงููุงูุน

## ๐ ุงููููุงุช ุงููุชุฃุซุฑุฉ

### src/components/building-builder/Step3FloorDefinitions.tsx
**ุงูุชุนุฏููุงุช**:
1. ุดุฑุท `mixedUnits` ูู `handleDefineFloors` (ุงูุณุทุฑ ~230)
2. ุดุฑุท ูุนุงูุฌุฉ `mixedUnits` ูู `handleSave` (ุงูุณุทุฑ ~390)
3. ุดุฑุท ุงูุชุญูู ูู ุงููุญุฏุงุช ุงููุงุฑุบุฉ (ุงูุณุทุฑ ~350)

**ูู ูุชู ุชุนุฏูู**:
- ูุงุฌูุฉ ุงููุณุชุฎุฏู (ุชุนูู ุจุดูู ุตุญูุญ ุจุงููุนู)
- MixedUnitsEditor (ูุนูู ููุง ูู)
- ููุทู ุญูุธ ุงูุจูุงูุงุช ุฅูู ุงูู API (ูุชุนุงูู ูุน ุงูููุนูู ุจุดูู ุตุญูุญ)

## โ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑุงุช ูุงุฌุญุฉ:
- [x] ุงูุจูุงุก: `npm run build` (24.46s) โ
- [x] ูุง ุฃุฎุทุงุก TypeScript โ
- [x] ุงูููุทู ูุชุนุงูู ูุน Service ุจููุณ ุทุฑููุฉ Mixed ู Ground โ
- [x] ุงูุชุญูู ูู ุงููุญุฏุงุช ุงููุงุฑุบุฉ ูุดูู Service โ

### ุงูุณููุงุฑูููุงุช ุงููุฏุนููุฉ:
- [x] ุทุงุจู ุฎุฏูู ุจูุญุฏุงุช ูุชููุนุฉ โ
- [x] ุทุงุจู ุฎุฏูู ุจููุน ูุญุฏุฉ ูุงุญุฏ ููุท โ
- [x] ุทุงุจู ูุฎุชูุท (ููุง ูุงู) โ
- [x] ุทุงุจู ุฃุฑุถู (ููุง ูุงู) โ
- [x] ุทูุงุจู ุฃุฎุฑู ุจูุธุงู ุชููุงุฆู โ

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงูุขู ูุธุงู ุชุนุฑูู ุงูุทูุงุจู ูุฏุนู:
- โ **3 ุฃููุงุน ุทูุงุจู ุจุฅุฏุฎุงู ูุฏูู**: Service, Mixed, Ground
- โ **4 ุฃููุงุน ุทูุงุจู ุจูุธุงู ุชููุงุฆู**: Regular, Parking, Office, Commercial
- โ ูุฑููุฉ ูุงููุฉ ูู ุชุญุฏูุฏ ุงููุญุฏุงุช ุญุณุจ ููุน ุงูุทุงุจู
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ูุชุณูุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู
- โ ุงูุชุญูู ุงููุงูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงูุญูุธ
