# ุชุญุฏูุซ ุนุฑุถ ุฑูู ุงููุญุฏุฉ ูู Step5 - ุตูุบุฉ floorCode-unitNumber
**ุงูุชุงุฑูุฎ**: 5 ุฃูุชูุจุฑ 2025

## ๐ ุงููุตู
ุชู ุชุญุฏูุซ ุนุฑุถ ุฃุฑูุงู ุงููุญุฏุงุช ูู Step5UnitsDefinition (ูุฑุญูุฉ ุชุนููู ุงูุชุตุงููู) ูุชุธูุฑ ุจุตูุบุฉ `floorCode-unitNumber` ุจุฏูุงู ูู ุฑูู ุงููุญุฏุฉ ููุทุ ููุง ูุฌุนู ุงูุชุนุฑู ุนูู ุงููุญุฏุงุช ุฃุณูู ูุฃูุถุญ.

## ๐ฏ ุงููุดููุฉ ุงูุณุงุจูุฉ

### ุงูุนุฑุถ ุงููุฏูู:
```
ุงูุทุงุจู ุงูุฃูู (F1)
โ 01
โ 02
โ 03
โ 04

ุงูุทุงุจู ุงูุซุงูู (F2)
โ 01
โ 02
โ 03
โ 04
```

### ุงููุดุงูู:
1. **ุบููุถ**: ุฑูู ุงููุญุฏุฉ "01" ูุธูุฑ ูู ูู ุทุงุจูุ ููุง ูุฏ ูุณุจุจ ูุจุณ
2. **ุณูุงู ูุงูุต**: ุงููุณุชุฎุฏู ูุญุชุงุฌ ููุฑุงุกุฉ ุงุณู ุงูุทุงุจู ุซู ุงููุธุฑ ูููุญุฏุฉ
3. **ุตุนูุจุฉ ุงูุชุชุจุน**: ุนูุฏ ุงุฎุชูุงุฑ ูุญุฏุงุช ูู ุทูุงุจู ูุชุนุฏุฏุฉุ ูุตุนุจ ุชุฐูุฑ ุฃู ูุญุฏุฉ ูู ุฃู ุทุงุจู
4. **ุนุฏู ุงูุชูุงูู ูุน ุงูุชุฎุฒูู**: ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชู ุชุฎุฒูู `unitNumber` ู `floorCode` ูููุตูููุ ูุงูุนุฑุถ ูุฌุจ ุฃู ููุถุญ ุงูุนูุงูุฉ

## โ ุงูุญู ุงููุทุจู

### ุงูุนุฑุถ ุงูุฌุฏูุฏ:
```
ุงูุทุงุจู ุงูุฃูู (F1)
โ F1-01
โ F1-02
โ F1-03
โ F1-04

ุงูุทุงุจู ุงูุซุงูู (F2)
โ F2-01
โ F2-02
โ F2-03
โ F2-04
```

### ุงููููุฒุงุช:
1. **ูุถูุญ ุชุงู**: ูู ูุญุฏุฉ ููุง ูุนุฑูู ูุฑูุฏ ูุงุถุญ
2. **ุณูุงู ูุงูู**: ุฑูู ุงูุทุงุจู ูุฑูู ุงููุญุฏุฉ ูู ููุณ ุงููุต
3. **ุณูููุฉ ุงูุชุชุจุน**: ุนูุฏ ุงุฎุชูุงุฑ ูุญุฏุงุช ูุชุนุฏุฏุฉุ ูุธูุฑ ุจูุถูุญ ูู ุฃู ุทุงุจู ูู ูุญุฏุฉ
4. **ุชูุงูู ูุน ุงููุนุงููุฑ**: ุตูุบุฉ ุดุงุฆุนุฉ ููููููุฉ ุนุงูููุงู

## ๐ง ุงูุชุนุฏููุงุช ุงูุชูููุฉ

### ูุจู ุงูุชุนุฏูู:
```typescript
{floorUnits.map(unit => {
  const unitName = unit.unitNumber || unit.unitCode || `ุดูุฉ ${unit.id}`;
  const hasDesign = unit.unitDesign?.id;
  
  return (
    <label key={unit.id}>
      <input type="checkbox" ... />
      <span>{unitName}</span>  // โ ุฑูู ุงููุญุฏุฉ ููุท: "01"
    </label>
  );
})}
```

### ุจุนุฏ ุงูุชุนุฏูู:
```typescript
{floorUnits.map(unit => {
  // ุจูุงุก ุงุณู ุงููุญุฏุฉ ุจุตูุบุฉ floorCode-unitNumber
  const unitNumber = unit.unitNumber || unit.unitCode || unit.id.toString();
  const floorCode = floor.floorCode || 'F';
  const displayName = `${floorCode}-${unitNumber}`;  // โ ุตูุบุฉ ูุงููุฉ: "F1-01"
  const hasDesign = unit.unitDesign?.id;
  
  return (
    <label key={unit.id}>
      <input type="checkbox" ... />
      <span>{displayName}</span>  // โ ุนุฑุถ ุงูุตูุบุฉ ุงููุงููุฉ
    </label>
  );
})}
```

## ๐ ุฃูุซูุฉ ุงูุนุฑุถ

### ูุซุงู 1: ุทูุงุจู ุณูููุฉ ุนุงุฏูุฉ
```
ุงูุทุงุจู ุงูุฎุงูุณ (F5)
โ F5-01  โ  (ูุน ุชุตููู)
โ F5-02
โ F5-03  โ  (ูุน ุชุตููู)
โ F5-04
```

### ูุซุงู 2: ุทูุงุจู ููุงูู
```
ุงูุทุงุจู -1 (P1)
โ P1-01
โ P1-02
โ P1-03
โ P1-20
```

### ูุซุงู 3: ุทูุงุจู ููุชุจูุฉ
```
ุงูุทุงุจู ุงูุนุงุดุฑ (O10)
โ O10-01
โ O10-02
โ O10-03
```

### ูุซุงู 4: ุทูุงุจู ุฎุฏููุฉ (ูุญุฏุงุช ูุฏููุฉ)
```
ุงูุทุงุจู ุงูุฃุฑุถู (G)
โ G-STORE-01
โ G-CLINIC-A
โ G-REST-001
```

### ูุซุงู 5: ุทูุงุจู ูุฎุชูุทุฉ
```
ุงูุทุงุจู ุงูุซุงูุซ (M3)
โ M3-01
โ M3-02
โ M3-OFF-503
โ M3-CLINIC-504
```

## ๐จ ุชูุงุตูู ุงูุชูุณูู

### ุจูุงุก ุงุณู ุงูุนุฑุถ:
```typescript
const unitNumber = unit.unitNumber || unit.unitCode || unit.id.toString();
const floorCode = floor.floorCode || 'F';
const displayName = `${floorCode}-${unitNumber}`;
```

### ุฃููููุงุช ุงูููู:
1. **unitNumber**: ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุซู "01", "02", "STORE-01")
2. **unitCode**: ููุฏ ุจุฏูู ุฅู ูู ููู unitNumber ููุฌูุฏ
3. **unit.id**: ูุนุฑูู ุงููุญุฏุฉ ูููุงุฐ ุฃุฎูุฑ

### floorCode ุงูุงูุชุฑุงุถู:
- ุฅุฐุง ูู ููู `floor.floorCode` ููุฌูุฏุ ูุชู ุงุณุชุฎุฏุงู `'F'` ููููุฉ ุงูุชุฑุงุถูุฉ
- ูุฐุง ูุงุฏุฑ ุงูุญุฏูุซ ูุฃู ุฌููุน ุงูุทูุงุจู ูุฌุจ ุฃู ูููู ููุง floorCode

## ๐ก ุงูููุงุฆุฏ

### 1. ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ
- **ูุจู**: "ุฃูู ูุญุฏุฉ 01ุ ูู ุฃู ุทุงุจูุ"
- **ุจุนุฏ**: "ูุญุฏุฉ F5-01 ูุงุถุญุฉ - ุงูุทุงุจู ุงูุฎุงูุณุ ุงููุญุฏุฉ ุงูุฃููู"

### 2. ุชูููู ุงูุฃุฎุทุงุก
- **ูุจู**: ูุฏ ูุฎุชุงุฑ ุงููุณุชุฎุฏู "01" ูู ุงูุทุงุจู ุงูุฎุงุทุฆ
- **ุจุนุฏ**: ูู ูุญุฏุฉ ููุง ูุนุฑูู ูุฑูุฏ ูุง ูุจุณ ููู

### 3. ุณูููุฉ ุงููุฑุงุฌุนุฉ
- **ูุจู**: ูุญุชุงุฌ ููุฑุฌูุน ููุณู ูู ุทุงุจู ููุชุฃูุฏ
- **ุจุนุฏ**: ูุฑู ุงููุญุฏุงุช ุงููุฎุชุงุฑุฉ ุจุฃููุงุฏูุง ุงููุงููุฉ ููุฑุงู

### 4. ุชูุงูู ูุน ุงูุฃูุธูุฉ ุงูุฃุฎุฑู
- ุตูุบุฉ `floorCode-unitNumber` ูู ูุนูุงุฑ ุดุงุฆุน
- ุณูู ุงูุชุนุฑู ุนูููุง ูู ูุจู ุฃู ูุณุชุฎุฏู
- ูุชูุงููุฉ ูุน ุงูุชูุงุฑูุฑ ูุงููุซุงุฆู

### 5. ุงูุงุชุณุงู ุนุจุฑ ุงููุธุงู
- ููุณ ุงูุตูุบุฉ ุงููุณุชุฎุฏูุฉ ูู ุงูุฑุณูุฉ ุงูุชูุงุนููุฉ
- ููุณ ุงูุตูุบุฉ ูู ุงูุชูุงุฑูุฑ
- ููุณ ุงูุตูุบุฉ ูู ุงูุจุญุซ ูุงูููุชุฑุฉ

## ๐ ุงูุณูุงู ุงููุงูู

### ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```json
{
  "id": 123,
  "unitNumber": "01",
  "floorCode": "F5",
  "blockFloorId": 456,
  // ... ุจุงูู ุงูุจูุงูุงุช
}
```

### ูู Step3 (ุงูุญูุธ):
```typescript
// ูุชู ุญูุธ unitNumber ููุท
units.push({ 
  unitNumber: String(uNum).padStart(2,'0'),  // "01"
  floorCode: d.floorCode,                    // "F5"
  // ... ุจุงูู ุงูุจูุงูุงุช
})
```

### ูู Step5 (ุงูุนุฑุถ):
```typescript
// ูุชู ุฏูุฌ floorCode ู unitNumber ููุนุฑุถ
const displayName = `${floorCode}-${unitNumber}`;  // "F5-01"
```

### ูู ุงูุฑุณูุฉ ุงูุชูุงุนููุฉ:
```typescript
// ููุณ ุงูุตูุบุฉ ููุงุชุณุงู
const visualKey = `unit-${blockName}-${floorNumber}-${unitNumber}`;
const displayLabel = `${floorCode}-${unitNumber}`;
```

## ๐ฏ ุญุงูุงุช ุฎุงุตุฉ

### ุงูุญุงูุฉ 1: ูุญุฏุงุช ุจุฃููุงุฏ ุญุฑููุฉ (ุทูุงุจู ุฎุฏููุฉ/ุฃุฑุถูุฉ)
```typescript
unitNumber: "STORE-01"
floorCode: "G"
displayName: "G-STORE-01"  // โ ูุงุถุญ ููุจุงุดุฑ
```

### ุงูุญุงูุฉ 2: ูุญุฏุงุช ุจุฑููุฒ ูุฎุชูุทุฉ
```typescript
unitNumber: "A"
floorCode: "F3"
displayName: "F3-A"  // โ ูุฏุนู ุงูุฃุญุฑู ุฃูุถุงู
```

### ุงูุญุงูุฉ 3: ุทูุงุจู ุจุฃููุงุฏ ุฑูููุฉ ุจุญุชุฉ
```typescript
unitNumber: "101"
floorCode: "10"
displayName: "10-101"  // โ ูุนูู ูุน ุงูุฃุฑูุงู ุงูุจุญุชุฉ
```

### ุงูุญุงูุฉ 4: floorCode ุบูุฑ ููุฌูุฏ (ูุงุฏุฑ)
```typescript
unitNumber: "01"
floorCode: undefined โ 'F'  // ูููุฉ ุงูุชุฑุงุถูุฉ
displayName: "F-01"  // โ fallback ูุงุถุญ
```

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ุงููุงุตู ุงููุณุชุฎุฏู
- **ุงููุงุตู**: `-` (ุดุฑุทุฉ)
- **ุณุจุจ ุงูุงุฎุชูุงุฑ**: ุดุงุฆุนุ ูุงุถุญุ ูุง ูุชุนุงุฑุถ ูุน ุงูุฃุฑูุงู ุฃู ุงูุฃุญุฑู
- **ุจุฏุงุฆู ุบูุฑ ูุณุชุฎุฏูุฉ**: `_`, `.`, `/`, `:`

### 2. ุชุฑุชูุจ ุงูููููุงุช
- **ุงูุชุฑุชูุจ**: `floorCode-unitNumber` (ูู ุงูุฃูุจุฑ ููุฃุตุบุฑ)
- **ุงูููุทู**: ุงูุทุงุจู ุฃููุงู (ูุทุงู ุฃูุณุน) ุซู ุงููุญุฏุฉ (ูุทุงู ุฃุถูู)
- **ูุซุงู**: `F5-01` ูููุฑุฃ "ุงูุทุงุจู ุงูุฎุงูุณุ ุงููุญุฏุฉ ุงูุฃููู"

### 3. ุงูุชูุงูู ูุน ุงูุฃููุงุท ุงูุฃุฎุฑู
ูุฐู ุงูุตูุบุฉ ุชุชูุงูู ูุน ุงูุฃููุงุท ุงูููุฌูุฏุฉ:
```typescript
// ูู BuildingData ููุฑุณูุฉ
unit.code = `${floorCode}-${unitNumber}`

// ูู ุงูุชูุงุฑูุฑ
`${tower.name}-${block.name}-${floorCode}-${unitNumber}`

// ูู ุงูุจุญุซ
searchKey = `${floorCode}-${unitNumber}`
```

### 4. ุฏุนู ุงููุบุงุช ุงููุชุนุฏุฏุฉ
ุงูุตูุบุฉ ุชุนูู ุจุดูู ูุญุงูุฏ ูุน ุฃู ูุบุฉ:
```typescript
// floorCode ูุฏ ูููู ุนุฑุจู ุฃู ุฅูุฌููุฒู ุฃู ุฑููู
floorCode: "ุท5"  โ "ุท5-01"  // ุนุฑุจู
floorCode: "F5"  โ "F5-01"  // ุฅูุฌููุฒู
floorCode: "5"   โ "5-01"   // ุฑููู

// unitNumber ูุฐูู
unitNumber: "ููก"  โ "F5-ููก"  // ุนุฑุจู
unitNumber: "01"  โ "F5-01"  // ุฅูุฌููุฒู
```

## ๐ ุงููููุงุช ุงููุชุฃุซุฑุฉ

### src/components/building-builder/Step5UnitsDefinition.tsx

**ุงูุชุนุฏูู ุงููุญูุฏ** (ุงูุณุทุฑ ~1056):
```typescript
// ูุจู:
const unitName = unit.unitNumber || unit.unitCode || `ุดูุฉ ${unit.id}`;

// ุจุนุฏ:
const unitNumber = unit.unitNumber || unit.unitCode || unit.id.toString();
const floorCode = floor.floorCode || 'F';
const displayName = `${floorCode}-${unitNumber}`;
```

**ุงูุณูุงู**:
- ุฏุงุฎู ุญููุฉ `floorUnits.map()`
- ูู ูุณู ุนุฑุถ ุงููุญุฏุงุช ููุงุฎุชูุงุฑ ุงููุฏูู
- ุงูุชุฃุซูุฑ: ุนุฑุถ ุงููุญุฏุงุช ููุท (ูุง ูุคุซุฑ ุนูู ุงูุญูุธ ุฃู ุงูุชุฎุฒูู)

## โ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑุงุช ูุงุฌุญุฉ:
- [x] ุงูุจูุงุก: `npm run build` (31.10s) โ
- [x] ูุง ุฃุฎุทุงุก TypeScript โ
- [x] ุงูุนุฑุถ ูุทุงุจู ุงูุตูุบุฉ ุงููุทููุจุฉ โ
- [x] ูุนูู ูุน ุฌููุน ุฃููุงุน ุงูุทูุงุจู โ
- [x] ูุฏุนู ุงููุญุฏุงุช ุงููุฏููุฉ (ุฎุฏูู/ูุฎุชูุท/ุฃุฑุถู) โ

### ุงูุณููุงุฑูููุงุช ุงููุฎุชุจุฑุฉ:
- [x] ุทูุงุจู ุณูููุฉ ุนุงุฏูุฉ: `F5-01` โ
- [x] ุทูุงุจู ููุงูู: `P1-01` โ
- [x] ุทูุงุจู ููุชุจูุฉ: `O10-01` โ
- [x] ุทูุงุจู ุฎุฏููุฉ: `S5-STORE-01` โ
- [x] ุทูุงุจู ุฃุฑุถูุฉ: `G-SHOP-A` โ
- [x] ุทูุงุจู ูุฎุชูุทุฉ: `M3-01`, `M3-OFF-503` โ

## ๐ ููุงุฑูุฉ ูุจู/ุจุนุฏ

| ุงูููุฒุฉ | ูุจู | ุจุนุฏ |
|--------|-----|-----|
| **ุตูุบุฉ ุงูุนุฑุถ** | "01" | "F5-01" |
| **ุงููุถูุญ** | ๐ก ูุชูุณุท | โ ุนุงูู |
| **ุชูููุฒ ุงููุญุฏุงุช** | ๐ก ูุญุชุงุฌ ุณูุงู ุงูุทุงุจู | โ ูุงุถุญ ุฐุงุชูุงู |
| **ุณูููุฉ ุงููุฑุงุฌุนุฉ** | ๐ก ูุชูุณุท | โ ุณูู ุฌุฏุงู |
| **ููุน ุงูุฃุฎุทุงุก** | ๐ก ูุชูุณุท | โ ููู |
| **ุงูุงุชุณุงู** | ๐ก ูุฎุชูู ุนู ุงูุฑุณูุฉ | โ ูุชุณู ูุน ุงูุฑุณูุฉ |
| **ุงูุงุญุชุฑุงููุฉ** | ๐ก ุฌูุฏ | โ ููุชุงุฒ |
| **ุฏุนู ุงููุบุงุช** | โ ูุนู | โ ูุนู |

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุนุฑุถ ูุญุณู ูุฃุฑูุงู ุงููุญุฏุงุช:
- โ **ุตูุบุฉ ูุงุถุญุฉ**: `floorCode-unitNumber`
- โ **ุณูุงู ูุงูู**: ุฑูู ุงูุทุงุจู ูุงููุญุฏุฉ ูุนุงู
- โ **ููุน ุงููุจุณ**: ูู ูุญุฏุฉ ููุง ูุนุฑูู ูุฑูุฏ
- โ **ุชุฌุฑุจุฉ ุฃูุถู**: ุงููุณุชุฎุฏู ูุนุฑู ุจุงูุถุจุท ุฃู ูุญุฏุฉ ูุฎุชุงุฑ
- โ **ุงุชุณุงู**: ููุณ ุงูุตูุบุฉ ูู ูู ุงููุธุงู
- โ **ุงุญุชุฑุงููุฉ**: ูุนูุงุฑ ุดุงุฆุน ูููููู ุนุงูููุงู

## ๐ก ุชูุตูุงุช ูุณุชูุจููุฉ (ุงุฎุชูุงุฑูุฉ)

### 1. ุฅุถุงูุฉ ุงุณู ุงูุจููู ูููุถูุญ ุงูุฃูุจุฑ (ุฅู ูุฒู)
```typescript
// ุตูุบุฉ ููุณุนุฉ
const displayName = `${blockName}-${floorCode}-${unitNumber}`;
// ูุซุงู: "A-F5-01"
```

### 2. ุชุฎุตูุต ุงูุตูุบุฉ ุญุณุจ ุงูุชูุถููุงุช
```typescript
// ุฅุนุฏุงุฏุงุช ูุฑูุฉ
const format = settings.unitDisplayFormat || '{floorCode}-{unitNumber}';
const displayName = format
  .replace('{floorCode}', floorCode)
  .replace('{unitNumber}', unitNumber);
```

### 3. tooltip ููุนูููุงุช ุฅุถุงููุฉ
```typescript
<span title={`ุงูุทุงุจู: ${floor.floorArabicName}, ุงููุญุฏุฉ: ${unitNumber}`}>
  {displayName}
</span>
```

ูุฐู ุงูุชูุตูุงุช ูููู ุฅุถุงูุชูุง ูุงุญูุงู ุญุณุจ ุงุญุชูุงุฌุงุช ุงููุดุฑูุน.
